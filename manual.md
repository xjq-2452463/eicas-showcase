# 操作手册

本手册详细介绍 EICAS 仿真系统的操作方法。

---

## 🎮 驾驶舱控制

| 按钮 | 功能 | 说明 |
|:---|:---|:---|
| **START** | 启动发动机 | 仅在 `ST_OFF` 状态且燃油充足时有效 |
| **STOP** | 紧急停车 | **最高优先级**，立即切断燃油并重置所有故障开关 |
| **THR +** | 增加推力 | 仅在 `ST_RUN` 状态有效，燃油流速 +1，N1/EGT 增加 3%~5% |
| **THR -** | 减小推力 | 仅在 `ST_RUN` 状态有效，燃油流速 -1，N1/EGT 减少 3%~5% |

::: warning 操作优先级
**STOP 按钮** 的优先级高于所有其他操作。按下后：
1. 立即进入 `ST_STOP` 状态
2. 重置该发动机所有故障按钮
3. 恢复所有传感器状态为正常
:::

---

## 🚨 告警色码系统

系统采用三色告警体系（`AlertLevel` 枚举）：

| 颜色 | 等级 | 代码 | 含义 | 触发条件示例 |
|:---|:---|:---|:---|:---|
| ⬜ **白色** | STATUS | `LVL_WHITE` | 状态信息/轻微故障 | 单个传感器通道失效 |
| 🟨 **琥珀色** | CAUTION | `LVL_AMBER` | 警戒，需要关注 | N1 > 105%、EGT 偏高、燃油低 |
| 🟥 **红色** | WARNING | `LVL_RED` | 严重警告，需立即处理 | N1 > 120%、EGT 超温、双通道全失效 |

### 具体告警阈值

**N1 转速告警：**
- `N1 > 105%` → 琥珀色 `RPM HIGH`
- `N1 > 120%` → 红色 `OVERSPEED` + 自动停车

**EGT 温度告警（启动阶段）：**
- `EGT > 850°C` → 琥珀色
- `EGT > 1000°C` → 红色 `OVERHEAT` + 自动停车

**EGT 温度告警（运行阶段）：**
- `EGT > 950°C` → 琥珀色
- `EGT > 1100°C` → 红色 `OVERHEAT` + 自动停车

**燃油系统告警：**
- `燃油流速 > 50` → 琥珀色 `FUEL FLOW HIGH`
- `燃油余量 < 1000` → 琥珀色 `FUEL QTY LOW`
- `燃油耗尽` → 红色 `FUEL EXHAUSTED` + 双发停车

---

## 📋 状态指示灯

| 指示灯 | 亮起条件 | 熄灭条件 |
|:---|:---|:---|
| **START** | `state == ST_START` | 进入其他状态 |
| **RUN** | `state == ST_RUN && disp_N1 >= 95.0` | N1 < 95% 或停止 |

---

## 🔧 标准操作程序

### 正常启动

1. 确认发动机处于 `ST_OFF` 状态
2. 点击 **START** 按钮，START 灯亮起
3. 前 2 秒：线性建立期（N1 和燃油流速线性增加）
4. 2 秒后：对数爬升期（N1、EGT、燃油流速对数增长）
5. N1 达到 95% 后，自动切换到 `ST_RUN` 状态
6. START 灯熄灭，RUN 灯亮起

### 正常停车

1. 点击 **STOP** 按钮
2. 燃油流速立即归零
3. N1 和 EGT 按对数规律衰减（约 9 秒）
4. N1 < 50 RPM 后，切换到 `ST_OFF` 状态

### 紧急情况处理

::: danger 自动停车触发条件
以下情况系统会自动执行停车：
- N1 > 120%（严重超速）
- EGT 超过红线温度
- 双发传感器全部失效
- 燃油耗尽
:::

---

## 📊 数据记录

系统自动生成两类文件：

| 文件类型 | 文件名格式 | 内容 |
|:---|:---|:---|
| **飞行数据** | `flight_data_YYYYMMDD_HHMMSS.csv` | A/B 通道原始数据、融合显示值、燃油流速、燃油余量 |
| **错误日志** | `error_log.txt` | 时间戳 + 告警等级 + 告警信息 |

### CSV 数据列说明

```
Time, L_N1_A, L_N1_B, L_N1_Disp, L_EGT_A, L_EGT_B, L_EGT_Disp, L_Flow,
      R_N1_A, R_N1_B, R_N1_Disp, R_EGT_A, R_EGT_B, R_EGT_Disp, R_Flow, Fuel_Qty
```
